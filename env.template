# =============================================================================
# CONFIGURACIÓN DE LA API CHATBOT
# =============================================================================
# Copia este archivo como .env y configura los valores según tu entorno

# =============================================================================
# BASE DE DATOS
# =============================================================================
# SQLite (desarrollo local)
# DATABASE_URL=sqlite+aiosqlite:///./chatbot.db

# PostgreSQL con pgvector (RECOMENDADO PARA PRODUCCIÓN)
DATABASE_URL=postgresql+asyncpg://chatbot_user:chatbot_password@localhost:5432/chatbot_db

# Configuración específica de PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=chatbot_user
POSTGRES_PASSWORD=chatbot_password
POSTGRES_DB=chatbot_db

# Configuración del pool de conexiones
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DATABASE_ECHO=false

# =============================================================================
# AUTENTICACIÓN JWT
# =============================================================================
# Genera una clave secreta segura: openssl rand -hex 32
SECRET_KEY=a8f5f167f44f4964e6c998dee827110c
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# ALMACENAMIENTO DE ARCHIVOS (MinIO/S3)
# =============================================================================
# MinIO local (desarrollo)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=chatbot-files
MINIO_SECURE=false

# AWS S3 (producción)
# MINIO_ENDPOINT=s3.amazonaws.com
# MINIO_ACCESS_KEY=tu-aws-access-key
# MINIO_SECRET_KEY=tu-aws-secret-key
# MINIO_BUCKET_NAME=tu-bucket-name
# MINIO_SECURE=true

# =============================================================================
# GOOGLE GEMINI AI
# =============================================================================
# API Key de Google Gemini (obtener desde Google AI Studio)
# https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here

# =============================================================================
# CONFIGURACIÓN DE EMAIL
# =============================================================================
# Proveedor de email: console, mailtrap
EMAIL_PROVIDER=console

# Configuración común
EMAIL_FROM_NAME=ChatBot UFPS
FRONTEND_URL=http://localhost:3000

# =============================================================================
# MAILTRAP (PARA DESARROLLO Y PRODUCCIÓN)
# =============================================================================
# Obtén tus credenciales en: https://mailtrap.io/
# Para desarrollo: usa sandbox.smtp.mailtrap.io
# Para producción: usa live.smtp.mailtrap.io
MAILTRAP_HOST=sandbox.smtp.mailtrap.io
MAILTRAP_PORT=2525
MAILTRAP_USERNAME=tu-mailtrap-username
MAILTRAP_PASSWORD=tu-mailtrap-password
MAILTRAP_FROM_EMAIL=noreply@chatbot.ufps.edu.co

# =============================================================================
# INTEGRACIÓN CON N8N (OPCIONAL)
# =============================================================================
# Webhook de N8N para procesamiento avanzado de preguntas
N8N_WEBHOOK=http://localhost:5678/webhook/chatbot

# =============================================================================
# CONFIGURACIÓN DEL SERVIDOR
# =============================================================================
HOST=0.0.0.0
PORT=8000
DEBUG=true

# =============================================================================
# CORS (CONFIGURAR SEGÚN TU FRONTEND)
# =============================================================================
# Desarrollo (permite todos los orígenes)
ALLOWED_ORIGINS=*

# Producción (especifica los dominios permitidos)
# ALLOWED_ORIGINS=https://tu-frontend.com,https://www.tu-frontend.com

# =============================================================================
# CONFIGURACIÓN DE LOGS
# =============================================================================
LOG_LEVEL=INFO
LOG_FILE=logs/app.log

# =============================================================================
# CONFIGURACIÓN DE EMBEDDINGS VECTORIALES
# =============================================================================
# Configuración para all-MiniLM-L6-v2 (modelo local, más rápido y gratuito)
EMBEDDING_DIMENSION=384
EMBEDDING_MODEL=all-MiniLM-L6-v2
MAX_EMBEDDING_BATCH_SIZE=100

# OpenAI API (opcional - para usar modelos de OpenAI en lugar del local)
# OPENAI_API_KEY=tu-openai-api-key
# OPENAI_MODEL=text-embedding-ada-002

# =============================================================================
# CONFIGURACIÓN DE REDIS (OPCIONAL - PARA CACHE)
# =============================================================================
# REDIS_URL=redis://localhost:6379/0

# =============================================================================
# CONFIGURACIÓN DE CELERY (OPCIONAL - PARA TAREAS ASÍNCRONAS)
# =============================================================================
# CELERY_BROKER_URL=redis://localhost:6379/1
# CELERY_RESULT_BACKEND=redis://localhost:6379/2

# =============================================================================
# USUARIO ADMINISTRADOR POR DEFECTO
# =============================================================================
# Credenciales del usuario administrador que se crea automáticamente
DEFAULT_ADMIN_EMAIL=admin@example.com
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_ADMIN_NAME=Administrador
DEFAULT_ADMIN_ROLE=admin

# =============================================================================
# CONFIGURACIÓN DE ALTA CONCURRENCIA PARA EMBEDDINGS
# =============================================================================
# Pool de conexiones de base de datos optimizado
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Configuración de embeddings para múltiples usuarios concurrentes
EMBEDDING_CACHE_SIZE=1000
EMBEDDING_BATCH_TIMEOUT=5.0
MAX_CONCURRENT_EMBEDDINGS=10

# =============================================================================
# CONFIGURACIÓN DE MONITOREO (OPCIONAL)
# =============================================================================
# SENTRY_DSN=https://tu-sentry-dsn@sentry.io/proyecto
